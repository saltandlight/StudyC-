# 윈도우 프로세스 간 통신
## 통신 방법
- 메세지: 사용자 정의 메세지로 정보 전달(제일 쉬운 방법)
- 클립보드: 중앙 저장소를 이용한 대량의 정보 교환
- DDE: Do Data Exchange 를 이용한 지속적 정보 교환
- 파일 맵핑: 파일 맵핑을 이용한 메모리 공유
- 메일 슬롯: 메일 슬롯 사용
- 파이프: 파이프 사용
- 윈속: 소켓 사용
- 등등

## Window Message를 이용하여 프로세스에 서로 통신을 하는 방법
### 원리
- 메시지 큐에 각종 동작들이 담기게 됨
- 무한루프를 돌며 사용자의 입력을 기다림
- GetMessage 함수가 메시지 큐로부터 메시지 가지고 옴
- DispatchMessage는 WndProc 함수가 메시지 구조체에 들어있는 윈도우 핸들을 이용 가능하도록 메시지 데이터를 WndProc 함수로 보냄
- => 결론: 메세지를 가로채기 위해 WndProc 함수를 Override 해서 재정의함
- 참고: `https://iopeni.tistory.com/entry/C-SendMessage-IPC`

### WndProc⭐⭐⭐
- 메시지 처리 함수
- WinMain에 메시지 루프에서 전달된 메시지를 처리해주는 함수
- 운영체제에서 호출함
- 이렇게 운영체제에서 호출하는 함수를 **콜백 함수**라고 함
- WinMain 내에 메시지 루프는 메시지를 전달하는 역할만 하고 메시지 처리는 여기서 다 한다.
- `LRESULT CALLBACK WndProc(HWND hWnd, UNIT iMessage, WPARAM wParam, LPARAM lParam)`
- hwnd: 메시지를 받을 윈도우 핸들
- iMessage: 메시지 종류
- wParam: 메시지에 다른 부가적인 정보 마우스 버튼의 상태, 키보드 조합키 등등
- lParam: 메시지에 따른 부가적인 정보 마우스의 좌표 전달해줌

- 보통 스위치로 처리하여 DefWindowProc() 함수를 리턴함
- 메뉴 최소화, 최대화, 윈도우 이동 등을 프로그래머가 조작 안 해도 OS가 알아서 처리해주는 함수

### RegisterMessage⭐
- 프로그래머가 윈도우에 없는 메세지를 필요해서 등록하여 관리할 때 사용함
- 응용 프로그램에서 정의한 메세지를 등록, 메세지가 중복되지 않도록 하여 이미 등록한 다른 메세지와 충돌나지 않게 함

### SendMessage
- 메세지를 메세지 큐에 넣는 것이 아니라 곧바로 윈도우 프로시저로 보내 즉각 처리함
- 부모 윈도우와 차일드 컨트롤 간의 통신에 활용
- 윈도우간 정확한 데이터 전송 및 처리를 위한 통신

### PostMessage
- 참고: `https://saack.tistory.com/51`

#### 참고 사항
##### HwndSource를 사용하여 할 수 있는 일
- 창 스타일, 창 클래스 스타일 및 확장 창 스타일 지정
- 창 프로시저를 후크함
- 창 핸들(hwnd)에 대한 액세스 제공
- 창 제거